<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gunzip</title>
    <script src="frameworks/materialize.min.js"></script>
    <script src="frameworks/jquery.js"></script>
    <link rel="stylesheet" href="frameworks/materialize.css">
</head>

<body class="waves-effect blue darken-3 waves-block waves-circle waves-blue" style="width: 100%;height: auto;">

  <div id="engine" class="modal">
    <div class="modal-content">
      <h4>Select Your Engine</h4>
      <a href="2d.html">2D</a>
      <a href="3d.html">3D</a>
    </div>
    <div class="modal-footer">
      <a href="#!" class="modal-close waves-effect waves-green btn-flat">Close</a>
    </div>
  </div>

          
    <header class="blue row">
        <div style="margin: 0%;width: 100%;" class="flow-text center centar-align blue lighten-3 green-text  card-header ">
            Gunzip Engine
        </div>
    </header>
    <a style="width:20%;" class="btn waves-effect lighten-1 grey left modal-trigger" href="2d.html">Open Editor</a>
    <label style="width:20%;" class="btn right large">
        <input id="projectPicker"  type="file" single style="width:20%;display: none;" value="open Project"
            class="btn grey waves-effect darken-1 right" />
        Open Project
    </label>
    <br>
    <br>
    <br>
    <br>
    <a style="width:100%;" class="pannel  flow-text green waves-effect lighten-3">Featured Projects [Every Week]</a>
    <div class="">
        <iframe style="height: 1000px;width:100%;position: relative;"  src="https://two.js.org/examples/dynamic-vertices.html" frameborder="0"></iframe>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
    var elems = document.querySelectorAll('.modal');
    var instances = M.Modal.init(elems);
  });
        function readSingleFile(e) {
            var file = e.target.files[0];
            if (!file) {
                return;
            }
            var reader = new FileReader();
            reader.onload = function (e) {
                var contents = e.target.result;
                alert()
                displayContents(contents);
            reader.readAsText(file)
        }
    }

        function displayContents(contents) {
            alert(contents)
            var JsonProject = JSON.parse(contents)
            localStorage.setItem("codeInit", JsonProject.codeupdate)
            localStorage.setItem("codeUpdate", JsonProject.codeinit)
            window.location.href = location.hostname +"/2d.html"
            
            alert(contents)
        }
        var file = document.getElementById("projectPicker")
        file.addEventListener('change', readSingleFile, false);

        window.onbeforeunload = function (e) {
            e.preventDefault();
            e.returnValue = 'Really want to quit the program?';
        };
        document.addEventListener('contextmenu', event => event.preventDefault());
        document.onkeydown = function (e) {
            e = e || window.event;

            if (!e.ctrlKey) return;

            var code = e.which || e.keyCode;

            switch (code) {
                case 83:
                case 87:
                    e.preventDefault();
                    e.stopPropagation();
                    break;
            }
        };
    </script>
</body>

</html>
